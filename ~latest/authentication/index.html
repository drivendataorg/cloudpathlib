
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A library that implements pathlib.Path methods for URIs for different cloud providers.">
      
      
      
        <link rel="canonical" href="https://cloudpathlib.drivendata.org/stable/authentication/">
      
      
        <link rel="prev" href="../why_cloudpathlib/">
      
      
        <link rel="next" href="../anypath-polymorphism/">
      
      
        
      
      
      <link rel="icon" href="../favicon.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Authentication - cloudpathlib</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.618322db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
      <link rel="stylesheet" href="../stylesheets/custom_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#authentication" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="cloudpathlib" class="md-header__button md-logo" aria-label="cloudpathlib" data-md-component="logo">
      
  <img src="../logo-no-text.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            cloudpathlib
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Authentication
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/drivendataorg/cloudpathlib" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="cloudpathlib" class="md-nav__button md-logo" aria-label="cloudpathlib" data-md-component="logo">
      
  <img src="../logo-no-text.svg" alt="logo">

    </a>
    cloudpathlib
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/drivendataorg/cloudpathlib" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../why_cloudpathlib/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Why cloudpathlib?
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Authentication
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Authentication
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#advanced-use" class="md-nav__link">
    <span class="md-ellipsis">
      
        Advanced Use
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accessing-public-s3-buckets-without-credentials" class="md-nav__link">
    <span class="md-ellipsis">
      
        Accessing public S3 buckets without credentials
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requester-pays-buckets-on-s3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Requester Pays buckets on S3
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-s3-extraargs-in-boto3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Other S3 ExtraArgs in boto3
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accessing-custom-s3-compatible-object-stores" class="md-nav__link">
    <span class="md-ellipsis">
      
        Accessing custom S3-compatible object stores
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accessing-azure-datalake-storage-gen2-adls-gen2-storage-with-hierarchical-namespace-enabled" class="md-nav__link">
    <span class="md-ellipsis">
      
        Accessing Azure DataLake Storage Gen2 (ADLS Gen2) storage with hierarchical namespace enabled
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pickling-cloudpath-objects" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pickling CloudPath objects
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../anypath-polymorphism/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AnyPath
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../http/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    HTTP URLs
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../caching/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Caching
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../patching_builtins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Compatibility
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../other_client_settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Other Client settings
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../testing_mocked_cloudpathlib/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Testing code that uses cloudpathlib
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Integrations
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Changelog
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_13" >
        
          
          <label class="md-nav__link" for="__nav_13" id="__nav_13_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api-reference/cloudpath/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CloudPath
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api-reference/anypath/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AnyPath
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_13_3" >
        
          
          <label class="md-nav__link" for="__nav_13_3" id="__nav_13_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Azure
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_13_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Azure
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api-reference/azblobclient/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AzureBlobClient
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api-reference/azblobpath/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AzureBlobPath
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_13_4" >
        
          
          <label class="md-nav__link" for="__nav_13_4" id="__nav_13_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    S3
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_13_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    S3
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api-reference/s3client/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    S3Client
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api-reference/s3path/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    S3Path
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_13_5" >
        
          
          <label class="md-nav__link" for="__nav_13_5" id="__nav_13_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    GS
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_13_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    GS
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api-reference/gsclient/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    GSClient
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api-reference/gspath/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    GSPath
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_13_6" >
        
          
          <label class="md-nav__link" for="__nav_13_6" id="__nav_13_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Submodules
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_13_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Submodules
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api-reference/client/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    cloudpathlib.client
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api-reference/enums/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    cloudpathlib.enums
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api-reference/exceptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    cloudpathlib.exceptions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api-reference/local/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    cloudpathlib.local
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#advanced-use" class="md-nav__link">
    <span class="md-ellipsis">
      
        Advanced Use
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accessing-public-s3-buckets-without-credentials" class="md-nav__link">
    <span class="md-ellipsis">
      
        Accessing public S3 buckets without credentials
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requester-pays-buckets-on-s3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Requester Pays buckets on S3
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-s3-extraargs-in-boto3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Other S3 ExtraArgs in boto3
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accessing-custom-s3-compatible-object-stores" class="md-nav__link">
    <span class="md-ellipsis">
      
        Accessing custom S3-compatible object stores
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accessing-azure-datalake-storage-gen2-adls-gen2-storage-with-hierarchical-namespace-enabled" class="md-nav__link">
    <span class="md-ellipsis">
      
        Accessing Azure DataLake Storage Gen2 (ADLS Gen2) storage with hierarchical namespace enabled
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pickling-cloudpath-objects" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pickling CloudPath objects
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="authentication">Authentication<a class="headerlink" href="#authentication" title="Permanent link">&para;</a></h1>
<p>For standard use, we recommend using environment variables to authenticate with the cloud storage services. This way, <code>cloudpathlib</code> will be able to automatically read those credentials and authenticate without you needing to do anything else. Passing credentials via environment variables is also generally a security best practice for avoiding accidental sharing.</p>
<p><code>cloudpathlib</code> supports the standard environment variables used by each respective cloud service SDK.</p>
<table>
<thead>
<tr>
<th>Cloud</th>
<th>Environment Variables</th>
<th>SDK Documentation</th>
</tr>
</thead>
<tbody>
<tr>
<td>Amazon S3</td>
<td><code>AWS_ACCESS_KEY_ID</code> and <code>AWS_SECRET_ACCESS_KEY</code> <br /> <em>or</em> <br /> <code>AWS_PROFILE</code> with credentials file</td>
<td><a href="https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html#environment-variables">Link</a></td>
</tr>
<tr>
<td>Azure Blob Storage</td>
<td><code>AZURE_STORAGE_CONNECTION_STRING</code></td>
<td><a href="https://docs.microsoft.com/en-us/azure/storage/blobs/storage-quickstart-blobs-python#copy-your-credentials-from-the-azure-portal">Link</a></td>
</tr>
<tr>
<td>Google Cloud Storage</td>
<td><code>GOOGLE_APPLICATION_CREDENTIALS</code></td>
<td><a href="https://cloud.google.com/docs/authentication/production#passing_variable">Link</a></td>
</tr>
</tbody>
</table>
<h2 id="advanced-use">Advanced Use<a class="headerlink" href="#advanced-use" title="Permanent link">&para;</a></h2>
<p>The communication between <code>cloudpathlib</code> and cloud storage services are handled by <code>Client</code> objects. Each cloud storage service has its own <code>Client</code> class implementation. See the linked API documentation pages for additional authentication options.</p>
<table>
<thead>
<tr>
<th>Cloud</th>
<th>Client</th>
<th>API Documentation</th>
</tr>
</thead>
<tbody>
<tr>
<td>Amazon S3</td>
<td><code>S3Client</code></td>
<td><a href="../api-reference/s3client/">Link</a></td>
</tr>
<tr>
<td>Azure Blob Storage</td>
<td><code>AzureBlobClient</code></td>
<td><a href="../api-reference/azblobclient/">Link</a></td>
</tr>
<tr>
<td>Google Cloud Storage</td>
<td><code>GSClient</code></td>
<td><a href="../api-reference/gsclient/">Link</a></td>
</tr>
</tbody>
</table>
<p>A client object holds the authenticated connection with a cloud service, as well as the configuration for the <a href="../caching/">local cache</a>. When you create instantiate a cloud path instance for the first time, a default client object is created for the respective cloud service.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">cloudpathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">CloudPath</span>

<span class="n">cloud_path</span> <span class="o">=</span> <span class="n">CloudPath</span><span class="p">(</span><span class="s2">&quot;s3://cloudpathlib-test-bucket/&quot;</span><span class="p">)</span>   <span class="c1"># same for S3Path(...)</span>
<span class="n">cloud_path</span><span class="o">.</span><span class="n">client</span>
<span class="c1">#&gt; &lt;cloudpathlib.s3.s3client.S3Client at 0x7feac3d1fb90&gt;</span>
</code></pre></div>
<p>All subsequent instances of that service's cloud paths (in the example, all subsequent <code>S3Path</code> instances) will reference the same client instance.</p>
<p>You can also explicitly instantiate a client instance. You will need to do so if you want to authenticate using any option other than the environment variables from the table in the previous section. (To see what those options are, check out the API documentation pages linked to in the table above.) You can then use that client instance's cloud path factory method, or pass it into a cloud path instantiation.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">cloudpathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">S3Client</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">S3Client</span><span class="p">(</span><span class="n">aws_access_key_id</span><span class="o">=</span><span class="s2">&quot;myaccesskey&quot;</span><span class="p">,</span> <span class="n">aws_secret_access_key</span><span class="o">=</span><span class="s2">&quot;mysecretkey&quot;</span><span class="p">)</span>

<span class="c1"># these next two commands are equivalent</span>
<span class="c1"># use client&#39;s factory method</span>
<span class="n">cp1</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">CloudPath</span><span class="p">(</span><span class="s2">&quot;s3://cloudpathlib-test-bucket/&quot;</span><span class="p">)</span>
<span class="c1"># or pass client as keyword argument</span>
<span class="n">cp2</span> <span class="o">=</span> <span class="n">CloudPath</span><span class="p">(</span><span class="s2">&quot;s3://cloudpathlib-test-bucket/&quot;</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">)</span>
</code></pre></div>
<p>If you have instantiated a client instance explicitly, you can also set it as the default client. Then, future cloud paths without a client specified will use that client instance.</p>
<div class="highlight"><pre><span></span><code><span class="n">client</span> <span class="o">=</span> <span class="n">S3Client</span><span class="p">(</span><span class="n">aws_access_key_id</span><span class="o">=</span><span class="s2">&quot;myaccesskey&quot;</span><span class="p">,</span> <span class="n">aws_secret_access_key</span><span class="o">=</span><span class="s2">&quot;mysecretkey&quot;</span><span class="p">)</span>
<span class="n">client</span><span class="o">.</span><span class="n">set_as_default_client</span><span class="p">()</span>
</code></pre></div>
<p>If you need a reference to the default client:</p>
<div class="highlight"><pre><span></span><code><span class="n">S3Client</span><span class="o">.</span><span class="n">get_default_client</span><span class="p">()</span>
<span class="c1">#&gt; &lt;cloudpathlib.s3.s3client.S3Client at 0x7feac3d1fb90&gt;</span>
</code></pre></div>
<h2 id="accessing-public-s3-buckets-without-credentials">Accessing public S3 buckets without credentials<a class="headerlink" href="#accessing-public-s3-buckets-without-credentials" title="Permanent link">&para;</a></h2>
<p>For most operations, you will need to have your S3 credentials configured. However, for buckets that provide public access, you can use <code>cloudpathlib</code> without credentials. To do so, you need to instantiate a client and pass the kwarg <code>no_sign_request=True</code>. Failure to do so will result in a <code>NoCredentialsError</code> being thrown.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">cloudpathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">CloudPath</span>

<span class="c1"># this file deinitely exists, but credentials are not configured</span>
<span class="n">CloudPath</span><span class="p">(</span><span class="s2">&quot;s3://ladi/Images/FEMA_CAP/2020/70349/DSC_0001_5a63d42e-27c6-448a-84f1-bfc632125b8e.jpg&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>

<span class="c1">#&gt; NoCredentialsError</span>
</code></pre></div>
<p>Instead, you must either configure credentials or instantiate a client object using <code>no_sign_request=True</code>:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">cloudpathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">S3Client</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">S3Client</span><span class="p">(</span><span class="n">no_sign_request</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># use this client object to create the CloudPath</span>
<span class="n">c</span><span class="o">.</span><span class="n">CloudPath</span><span class="p">(</span><span class="s2">&quot;s3://ladi/Images/FEMA_CAP/2020/70349/DSC_0001_5a63d42e-27c6-448a-84f1-bfc632125b8e.jpg&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>
<span class="c1">#&gt; True</span>
</code></pre></div>
<p><strong>Note:</strong> Many public buckets <em>do not</em> allow listing of the bucket contents by anonymous users. If this is the case, any listing operation on a directory will fail with an error like <code>ClientError: An error occurred (AccessDenied) when calling the ListObjectsV2 operation: Access Denied</code> when you try to do an operation, even with <code>no_sign_request=True</code>. In this case, you can generally only work with <code>CloudPath</code> objects that refer to the files themselves (instead of directories). You can contact the bucket owner to request that they allow listing, or write your code in a way that only references files you know will exist.</p>
<p>As noted above, you can also call <code>.set_as_default_client()</code> on the client object that you create and then it will be used by default without your having to explicitly use the client object that you created.</p>
<h2 id="requester-pays-buckets-on-s3">Requester Pays buckets on S3<a class="headerlink" href="#requester-pays-buckets-on-s3" title="Permanent link">&para;</a></h2>
<p>S3 supports <a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/RequesterPaysBuckets.html">Requester Pays</a> buckets where you must have credentials to access the bucket and any costs are passed on to you rather than the owner of the bucket.</p>
<p>For a requester pays bucket, you need to pass extras telling cloudpathlib you will pay for any operations.</p>
<p>For example, on the requester pays bucket <code>arxiv</code>, just trying to list the contents will result in a <code>ClientError</code>:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">cloudpathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">CloudPath</span>

<span class="n">tars</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">CloudPath</span><span class="p">(</span><span class="s2">&quot;s3://arxiv/src/&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">iterdir</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tars</span><span class="p">)</span>

<span class="c1">#&gt; ClientError: An error occurred (AccessDenied) ...</span>
</code></pre></div>
<p>To indicate that the request payer will be the "requester," pass the extra args to an <code>S3Client</code> and use that client to instantiate paths:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">cloudpathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">S3Client</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">S3Client</span><span class="p">(</span><span class="n">extra_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;RequestPayer&quot;</span><span class="p">:</span> <span class="s2">&quot;requester&quot;</span><span class="p">})</span>

<span class="c1"># use the client we created to build the path</span>
<span class="n">tars</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">CloudPath</span><span class="p">(</span><span class="s2">&quot;s3://arxiv/src/&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">iterdir</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tars</span><span class="p">)</span>
</code></pre></div>
<p>As noted above, you can also call <code>.set_as_default_client()</code> on the client object that you create and then it will be used by default without your having to explicitly use the client object that you created.</p>
<h2 id="other-s3-extraargs-in-boto3">Other S3 <code>ExtraArgs</code> in <code>boto3</code><a class="headerlink" href="#other-s3-extraargs-in-boto3" title="Permanent link">&para;</a></h2>
<p>The S3 SDK, <code>boto3</code> supports a set of <code>ExtraArgs</code> for uploads, downloads, and listing operations. When you instantiate a client, you can pass the <code>extra_args</code> keyword argument with any of those extra args that you want to set. We will pass these on to the upload, download, and list methods insofar as those methods support the specific args.</p>
<p>The args supported for uploads are the same as <code>boto3.s3.transfer.S3Transfer.ALLOWED_UPLOAD_ARGS</code>, see the <a href="https://boto3.amazonaws.com/v1/documentation/api/latest/reference/customizations/s3.html#boto3.s3.transfer.S3Transfer"><code>boto3</code> documentation</a> for the latest, but as of the time of writing, these are:</p>
<ul>
<li><code>ACL</code></li>
<li><code>CacheControl</code></li>
<li><code>ChecksumAlgorithm</code></li>
<li><code>ContentDisposition</code></li>
<li><code>ContentEncoding</code></li>
<li><code>ContentLanguage</code></li>
<li><code>ContentType</code></li>
<li><code>ExpectedBucketOwner</code></li>
<li><code>Expires</code></li>
<li><code>GrantFullControl</code></li>
<li><code>GrantRead</code></li>
<li><code>GrantReadACP</code></li>
<li><code>GrantWriteACP</code></li>
<li><code>Metadata</code></li>
<li><code>ObjectLockLegalHoldStatus</code></li>
<li><code>ObjectLockMode</code></li>
<li><code>ObjectLockRetainUntilDate</code></li>
<li><code>RequestPayer</code></li>
<li><code>ServerSideEncryption</code></li>
<li><code>StorageClass</code></li>
<li><code>SSECustomerAlgorithm</code></li>
<li><code>SSECustomerKey</code></li>
<li><code>SSECustomerKeyMD5</code></li>
<li><code>SSEKMSKeyId</code></li>
<li><code>SSEKMSEncryptionContext</code></li>
<li><code>Tagging</code></li>
<li><code>WebsiteRedirectLocation</code></li>
</ul>
<p>The args supported for downloads are the same as <code>boto3.s3.transfer.S3Transfer.ALLOWED_DOWNLOAD_ARGS</code>, see the <a href="https://boto3.amazonaws.com/v1/documentation/api/latest/reference/customizations/s3.html#boto3.s3.transfer.S3Transfer"><code>boto3</code> documentation</a> for the latest, but as of the time of writing, these are:</p>
<ul>
<li><code>ChecksumMode</code></li>
<li><code>VersionId</code></li>
<li><code>SSECustomerAlgorithm</code></li>
<li><code>SSECustomerKey</code></li>
<li><code>SSECustomerKeyMD5</code></li>
<li><code>RequestPayer</code></li>
<li><code>ExpectedBucketOwner</code></li>
</ul>
<p>To use any of these extra args, pass them as a dict to <code>extra_args</code> when instantiating and <code>S3Client</code>.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">cloudpathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">S3Client</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">S3Client</span><span class="p">(</span><span class="n">extra_args</span><span class="o">=</span><span class="p">{</span>
    <span class="s2">&quot;ChecksumMode&quot;</span><span class="p">:</span> <span class="s2">&quot;ENABLED&quot;</span><span class="p">,</span>  <span class="c1"># download extra arg, only used when downloading</span>
    <span class="s2">&quot;ACL&quot;</span><span class="p">:</span> <span class="s2">&quot;public-read&quot;</span><span class="p">,</span>       <span class="c1"># upload extra arg, only used when uploading</span>
<span class="p">})</span>

<span class="c1"># use these extras for all CloudPaths</span>
<span class="n">c</span><span class="o">.</span><span class="n">set_as_default_client</span><span class="p">()</span>
</code></pre></div>
<p><strong>Note:</strong> The <code>extra_args</code> kwargs accepts the union of upload and download args, and will only pass on the relevant subset to the <code>boto3</code> method that is called by the internals of <code>S3Client</code>.</p>
<p><strong>Note:</strong> The ExtraArgs on the client will be used for every call that client makes. If you need to set different <code>ExtraArgs</code> in different code paths, we recommend creating separate explicit client objects and using those to create and manage the CloudPath objects with different needs.</p>
<p><strong>Note:</strong> To explicitly set the <code>ContentType</code> and <code>ContentEncoding</code>, we recommend using the <code>content_type_method</code> kwarg when instantiating the client. If instead you want to set this for all uploads via the extras, you must additionally pass <code>content_type_method=None</code> to the <code>S3Client</code> so we don't try to guess these automatically.</p>
<h2 id="accessing-custom-s3-compatible-object-stores">Accessing custom S3-compatible object stores<a class="headerlink" href="#accessing-custom-s3-compatible-object-stores" title="Permanent link">&para;</a></h2>
<p>It might happen so that you need to access a customly deployed S3 object store (<a href="https://min.io/">MinIO</a>, <a href="https://ceph.io/ceph-storage/object-storage/">Ceph</a> or any other).
In such cases, the service endpoint will be different from the AWS object store endpoints (used by default).
To specify a custom endpoint address, you will need to manually instantiate <code>Client</code> with the <code>endpoint_url</code> parameter,
provinding http/https URL including port.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">cloudpathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">S3Client</span><span class="p">,</span> <span class="n">CloudPath</span>

<span class="c1"># create a client pointing to the endpoint</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">S3Client</span><span class="p">(</span><span class="n">endpoint_url</span><span class="o">=</span><span class="s2">&quot;http://my.s3.server:1234&quot;</span><span class="p">)</span>

<span class="c1"># option 1: use the client to create paths</span>
<span class="n">cp1</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">CloudPath</span><span class="p">(</span><span class="s2">&quot;s3://cloudpathlib-test-bucket/&quot;</span><span class="p">)</span>

<span class="c1"># option 2: pass the client as keyword argument</span>
<span class="n">cp2</span> <span class="o">=</span> <span class="n">CloudPath</span><span class="p">(</span><span class="s2">&quot;s3://cloudpathlib-test-bucket/&quot;</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">)</span>

<span class="c1"># option3: set this client as the default so it is used in any future paths</span>
<span class="n">client</span><span class="o">.</span><span class="n">set_as_default_client</span><span class="p">()</span>
<span class="n">cp3</span> <span class="o">=</span> <span class="n">CloudPath</span><span class="p">(</span><span class="s2">&quot;s3://cloudpathlib-test-bucket/&quot;</span><span class="p">)</span>
</code></pre></div>
<h2 id="accessing-azure-datalake-storage-gen2-adls-gen2-storage-with-hierarchical-namespace-enabled">Accessing Azure DataLake Storage Gen2 (ADLS Gen2) storage with hierarchical namespace enabled<a class="headerlink" href="#accessing-azure-datalake-storage-gen2-adls-gen2-storage-with-hierarchical-namespace-enabled" title="Permanent link">&para;</a></h2>
<p>Some Azure storage accounts are configured with "hierarchical namespace" enabled. This means that the storage account is backed by the Azure DataLake Storage Gen2 product rather than Azure Blob Storage. For many operations, the two are the same and one can use the Azure Blob Storage API. However, for some operations, a developer will need to use the Azure DataLake Storage API. The <code>AzureBlobClient</code> class implemented in cloudpathlib is designed to detect if hierarchical namespace is enabled and use the Azure DataLake Storage API in the places where it is necessary or it provides a performance improvement. Usually, a user of cloudpathlib will not need to know if hierarchical namespace is enabled and the storage account is backed by Azure DataLake Storage Gen2 or Azure Blob Storage.</p>
<p>If needed, the Azure SDK provided <code>DataLakeServiceClient</code> object can be accessed via the <code>AzureBlobClient.data_lake_client</code>. The Azure SDK provided <code>BlobServiceClient</code> object can be accessed via <code>AzureBlobClient.service_client</code>.</p>
<h2 id="pickling-cloudpath-objects">Pickling <code>CloudPath</code> objects<a class="headerlink" href="#pickling-cloudpath-objects" title="Permanent link">&para;</a></h2>
<p>You can pickle and unpickle <code>CloudPath</code> objects normally, for example:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pickle</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">cloudpathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">CloudPath</span>


<span class="k">with</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;cloud_path.pkl&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">CloudPath</span><span class="p">(</span><span class="s2">&quot;s3://my-awesome-bucket/cool-file.txt&quot;</span><span class="p">),</span> <span class="n">f</span><span class="p">)</span>

<span class="k">with</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;cloud_path.pkl&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">pickled</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="k">assert</span> <span class="n">pickled</span><span class="o">.</span><span class="n">bucket</span> <span class="o">==</span> <span class="s2">&quot;my-awesome-bucket&quot;</span>
</code></pre></div>
<p>The associated <code>client</code>, however, is not pickled. When a <code>CloudPath</code> is 
unpickled, the client on the unpickled object will be set to the default 
client for that class.</p>
<p>For example, this <strong>will not work</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pickle</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">cloudpathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">S3Client</span><span class="p">,</span> <span class="n">CloudPath</span>


<span class="c1"># create a custom client pointing to the endpoint</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">S3Client</span><span class="p">(</span><span class="n">endpoint_url</span><span class="o">=</span><span class="s2">&quot;http://my.s3.server:1234&quot;</span><span class="p">)</span>

<span class="c1"># use that client when creating a cloud path</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">CloudPath</span><span class="p">(</span><span class="s2">&quot;s3://cloudpathlib-test-bucket/cool_file.txt&quot;</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="s2">&quot;hello!&quot;</span><span class="p">)</span>

<span class="k">with</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;cloud_path.pkl&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>

<span class="k">with</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;cloud_path.pkl&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">pickled</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="c1"># this will be False, because it will use the default `S3Client`</span>
<span class="k">assert</span> <span class="n">pickled</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span> <span class="o">==</span> <span class="kc">False</span>
</code></pre></div>
<p>To get this to work, you need to set the custom <code>client</code> to the default
before unpickling:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># set the custom client as the default before unpickling</span>
<span class="n">client</span><span class="o">.</span><span class="n">set_as_default_client</span><span class="p">()</span>

<span class="k">with</span> <span class="p">(</span><span class="s2">&quot;cloud_path.pkl&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">pickled2</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="k">assert</span> <span class="n">pickled2</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>
<span class="k">assert</span> <span class="n">pickled2</span><span class="o">.</span><span class="n">client</span> <span class="o">==</span> <span class="n">client</span>
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.sections", "navigation.expand"], "search": "../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>